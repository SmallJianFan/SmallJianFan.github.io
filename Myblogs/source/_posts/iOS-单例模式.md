---
title: iOS--单例模式
date: 2018-12-06 21:09:24
tags:
---
前言
----
简单认识一下单例吧~

在写项目的时候，我们实际用到了很多系统给我们提供的单例类。

如：

	[UIApplication sharedApplication];  //应用程序实例类
	
	[NSNotificationCenter defaultCenter];//消息中心实例类
	
	[NSFileManager defaultManager];//文件管理实例类
	
	[NSUserDefaults standardUserDefaults];//应用程序设置
	
	[NSURLCache sharedURLCache];//请求缓存实例类


一般在程序中，经常调用的类，如工具类，公共跳转类等都会采用单例模式。

如：

a. 在某个应用程序中，共享一份资源（这份资源只需要创建初始化一次）

b. 网络计数器

c. 分享界面、登录界面、评论界面不登录会跳转到唯一界面登录界面（可以用单例实现）

d. 点击跳转，控制器设置为单例，该控制器不会被销毁，依然存在内存中，返回再次回去，再点击进来，则会快速进入不会创建对应的新的控制器

简单介绍
----

1、单例是什么？

单例模式就是一个类只有一个实例。在 Foundation 和 Application Kit 框架中的一些类只允许创建单个对象，即这些类在当前进程中的只有唯一一个实例。

2、为什么使用单例设计？简单描述下对单利模式设计的理解？

a.单例设计是用来限制一个类只能创建一个对象，那么此对象中的属性可以存储全局共享的数据，所有的类都可以访问--->设置此单例对象中的属性数据。

b.如果一个类创建的时候非常耗费性能，那么此类可以设置为单例节约性能，从而达到节省内存资源，一个类就一个对象。

3、单例模式的种类
a.懒汉式

用到的时候在加载（同懒加载）

b.饿汉式

程序已启动就加载---->>(调用load方法，在程序已进入就有)

4、单例模式的实现方法

互斥锁（同步锁）dispatch_once

5、单例在内存中的位置

static修饰的，存在常量区

6、单例的生命周期

跟随着AppDelegate的销毁而销毁，由系统自动释放这部分内存。

7、单例模式的优点与缺点

a.内存占用与运行时间

对比使用单例和非单例模式的例子，在内存占用与运行时间存在以下差距：

（1）单例模式：单例模式每次获取实例时都会先进行判断，看该实例是否存在：如果存在，则返回实例；如果不存在，则会创建实例。因此，会浪费一些判断的时间。但是，如果一直没有用这个实例的话，就不会创建实例，会节约内存空间。

（2）非单例模式：当类加载的时候就会创建类的实例，不管你是否使用它。然后当每次调用的时候就不需要判断该实例是否存在了，节约了运行时间。但是如果该实例没有使用的话，就浪费了内存。

8、只需要实现三个方法

（1）allocWithZone: (alloc底层调用该方法)

（2）shareCar（一种命名规范）

（3）copyWithZone （对应实例变量 调用copy会调用该方法）

创建单例代码可以参考 [https://blog.csdn.net/u013983033/article/details/83415144](https://blog.csdn.net/u013983033/article/details/83415144)

[https://blog.csdn.net/sherman_yw/article/details/68948957](https://blog.csdn.net/sherman_yw/article/details/68948957)